<!DOCTYPE html>
<html ng-app="myapp">
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css"/>
    
</head>
<style>
	.img-box{
		width: 200px;
		height: 200px;
		position: relative;
	}
	.img-box .mask{
		position: absolute;
		left: 0;top:0;
		width: 200px;
		height: 200px;
		background: rgba(0,0,0,0.5);
		color: #fff;
		display: flex;
		justify-content: center;
		align-items: center;
	}
	.img-box img{
		width: 100%;
		height: 100%;
	}
	.good-box input,.good-box button{
		width:200px;
		margin: 10px 0px;
	}
</style>
<body>
	<div class="container">
		<div class="panel panel-primary">
			<div class="panel-heading">
				知识点：
			</div>
			<div class="panel-body">
				<p>1.在angular里使用计时器使用$interval的服务，销毁的时候使用$interval.cancel</p>
			</div>
		</div>
	</div>
	<div class="container">
		<div class="panel panel-primary">
			<div class="panel-heading">
				效果：
			</div>
			<div  class="panel-body" ng-controller="infoController">
				<div class="good-box">
					<div class="img-box">
						<div ng-hide="canBuy" class="mask">
							还有<span ng-bind="time">0</span>秒可以抢购
						</div>
						<img src="4.jpg" class="img-thumbnail"/>
					</div>
					<input ng-disabled="!canBuy" type="number" class="form-control"  value="1" />
					<button ng-disabled="!canBuy" class="btn btn-success">去抢购</button>
				</div>
			</div>
		</div>
	</div>
	

	
</body>

<script src="angular.min.js" type="text/javascript" charset="utf-8"></script>
<script>
	var app=angular.module("myapp",[]);
	app.controller("infoController",function($scope,$interval,$log){
		$scope.canBuy=false;
		$scope.time=5;
		var timer = $interval(function(){
			$scope.time--;
			$log.log(1);
			if ($scope.time<=0) {
				$scope.canBuy=true;
				$interval.cancel(timer);
			} 
			
			
		},100)
		
		
		/*var timer=$interval(function(){
			$scope.time--;
			console.log(1)
			if($scope.time<=0){
				$scope.canBuy=true;
				$interval.cancel(timer)
			}
			
		},200)*/
		
	})
	
	
</script>
</html>